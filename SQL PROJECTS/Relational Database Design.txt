-- Creating the 'Roles' table
CREATE TABLE Roles (
    RoleID INT PRIMARY KEY IDENTITY(1,1),
    RoleName VARCHAR(50) NOT NULL
);

CREATE TABLE Statuses (
    StatusID INT PRIMARY KEY IDENTITY(1,1),
    StatusName VARCHAR(50) NOT NULL
);


CREATE TABLE Users (
    UserID INT PRIMARY KEY IDENTITY(1,1),
    UserName VARCHAR(100) NOT NULL,
    Email VARCHAR(100) UNIQUE NOT NULL,
    RoleID INT,
    FOREIGN KEY (RoleID) REFERENCES Roles(RoleID)
);

CREATE TABLE UserAccounts (
    AccountID INT PRIMARY KEY IDENTITY(1,1),
    UserID INT,
    StatusID INT,
    AccountCreatedDate DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (StatusID) REFERENCES Statuses(StatusID)
);



INSERT INTO Roles (RoleName) VALUES ('Admin');
INSERT INTO Roles (RoleName) VALUES ('User');


INSERT INTO Statuses (StatusName) VALUES ('Active');
INSERT INTO Statuses (StatusName) VALUES ('Inactive');


INSERT INTO Users (UserName, Email, RoleID) VALUES ('Alice', 'alice@example.com', 1);
INSERT INTO Users (UserName, Email, RoleID) VALUES ('Bob', 'bob@example.com', 2);

INSERT INTO UserAccounts (UserID, StatusID) VALUES (1, 1);
INSERT INTO UserAccounts (UserID, StatusID) VALUES (2, 2);




ALTER TABLE UserAccounts NOCHECK CONSTRAINT ALL;
ALTER TABLE Users NOCHECK CONSTRAINT ALL;

DELETE FROM UserAccounts;
DELETE FROM Users;
DELETE FROM Statuses;
DELETE FROM Roles;

ALTER TABLE UserAccounts CHECK CONSTRAINT ALL;
ALTER TABLE Users CHECK CONSTRAINT ALL;

